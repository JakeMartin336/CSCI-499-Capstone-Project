<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Messaging Page</title>

    <!-- Custom Css -->
    <link rel="stylesheet" href="/static/styles.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet" />
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Itim&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" />
  </head>
  <body>

   <!-- Navbar top -->
    <div class="navbar-top">
      <img src="{{ url_for('static', filename='logo.png') }}" alt="ConcertConnect Logo" style="height: 90px; margin-right: 200px;" />
      <ul>
        <div class="explore-button-container">
          <button class="button" onclick="window.location.href='/home'">Home <i class="fa fa-home"></i></button>
        </div>
        <div class="explore-button-container">
          <button class="button" onclick="window.location.href='/venues'">Venues <i class="fa fa-music"></i></button>
        </div>
        <div class="explore-button-container">
          <button class="button" onclick="window.location.href='/concerts'">Concerts <i class="fa fa-headphones"></i></button>
        </div>
        <div class="explore-button-container">
          <button class="button" onclick="window.location.href='/messages'">Messages <i class="fa fa-comments"></i></button>
        </div>
        <div class="explore-button-container">
          <button class="button" onclick="window.location.href='/logout'">Log Out <i class="fa fa-sign-out-alt"></i></button>
        </div>
      </ul>
    </div>

   <!-- Sidenav -->
   <div class="container">
    <div class="sidenav-container">
      <div class="sidenav">
        <div class="profile-box">
          <div class="profile">
            <img
              src="https://i.pinimg.com/736x/4c/50/87/4c50870fef410d14ff495ea1f532565a.jpg" 
              alt="Profile Picture" 
              style="width: 125px; height: 125px; border-radius: 50%; object-fit: cover; overflow: hidden;"
            />
            <div class="name">
              {{ user['user_name'] if user else 'User Name' }}
            </div>
            <div class="job">
              {{ user['account_description'] if user else '' }}
            </div>
          </div>

          <div class="sidenav-url">
            <div class="url">
              <a href="#profile">Profile</a>
              <hr />
            </div>
            <div class="url">
              <a href="#settings">Settings</a>
              <hr />
            </div>
          </div>
        </div>
      </div>

      <div class="sidenav">
        <div class="concerts-box">
          <h3 style="color: #c28adc; text-align: center; font-size: 22px;">ðŸŽ¶ My Concert List ðŸŽ¶</h3>

          <h4 style="color:#61d1b2;">Going:</h4>
          <h4 style="color:#d6a351;">Interested:</h4>
          <h4 style="color:#e05c8f;">Attended:</h4>
          <ul>
            {% if favorite_concerts %} 
              {% for concert in favorite_concerts %}
                <li><a href="#{{ concert.id }}">{{ concert.name }}</a></li>
              {% endfor %} 
            {% else %}
              <li>No concerts favorited yet.</li>
            {% endif %}
          </ul>
        </div>
      </div>
    </div>

    <!-- End -->

      

      <!-- Main Content -->
      <div class="main">
        <div class="messaging-container">
          <div class="contacts-panel">
            <h3>Contacts</h3>
            <ul class="contact-list">
              <li class="contact">User 1</li>
              <li class="contact">User 2</li>
              <li class="contact">User 3</li>
            </ul>
          </div>

          <div class="chat-window">
            <div class="chat-header">
              <!-- Dynamically change the name of the user being chatted with -->
              <span class="contact-name">Chat with {{ chosen_user_name if chosen_user_name else 'User' }}</span>
              <div class="chat-options">
                <button class="icon-button" onclick="startVideoCall()"><i class="fa fa-video"></i></button>
                <button class="icon-button" onclick="startVoiceCall()"><i class="fa fa-phone"></i></button>
              </div>
            </div>

            <div class="chat-messages">
              <div class="message received">Hey we matched! Are you excited for Sabrina's concert?</div>
              <div class="message sent">Yes I am! How are you planning to get to MSG? Maybe we can meet up somewhere and commute together!</div>
            </div>

            <div class="message-input">
              <input type="text" placeholder="Send a message...">
              <button class="icon-button" onclick="sendMessage()"><i class="fa fa-paper-plane"></i></button>
              <button class="icon-button" onclick="attachFile()"><i class="fa fa-paperclip"></i></button>
            </div>
          </div>
        </div>
      </div>

    </div>

    <script>
      function startVideoCall() { alert('Starting video call...'); }
      function startVoiceCall() { alert('Starting voice call...'); }
      function sendMessage() { alert('Message sent!'); }
      function attachFile() { alert('Attach file clicked!'); }
    </script>
  </body>
</html>
<!-- How to run flask -->
<!-- 1) python3 -m venv venv
     2) source venv/bin/activate
     3) flask run -->

<!-- To check for account example: 
 1) add this to end of url: /?account_id=10001 -->